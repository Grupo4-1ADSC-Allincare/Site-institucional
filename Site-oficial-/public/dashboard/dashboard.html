<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>DashBoard | Allincare</title>
  <link rel="stylesheet" type="text/css" href="dashboards.css" />

  <script type="text/javascript" src="https://www.chartjs.org/dist/2.8.0/Chart.min.js"></script>

</head>

<body>
  <div class="container">
    <div class="navigation">
      <ul>
        <li>
          <a href="#">
            <span class="icon">
              <ion-icon name="medkit-outline"></ion-icon>
            </span>
            <span class="title">Bem-vindo!</span>
          </a>
        </li>
        <li>
          <a href="#">
            <span class="icon">
              <ion-icon name="home-outline"></ion-icon>
            </span>
            <span class="title">DashBoard</span>
          </a>
        </li>

        <!-- <li>
            <a href="#">
              <span class="icon"
                ><ion-icon name="bar-chart-outline"></ion-icon
              ></span>
              <span class="title">Gráfico</span>
            </a>
          </li> -->
        <li>
          <a href="#">
            <span class="icon">
              <ion-icon name="chatbubble-outline"></ion-icon>
            </span>
            <span class="title">Mensagem</span>
          </a>
        </li>
        <li>
          <a href="../login.html">
            <span class="icon">
              <ion-icon name="log-out-outline"></ion-icon>
            </span>
            <span class="title">Logout</span>
          </a>
        </li>
      </ul>
    </div>

    <!--Principal-->
    <div class="main">
      <div class="topbar">
        <div class="toggle">
          <ion-icon name="menu-outline"></ion-icon>
        </div>

        <!-- Search
          <div class="search">
            <label>
              <input type="text" placeholder="Search here" />
              <ion-icon name="search-outline"></ion-icon>
            </label>
          </div>-->

        <div class="search">
          <div class="title">
            <h3>Olá, <span id="b_usuario">usuário</span>!</h3>
          </div>
        </div>

        <!-- UserImage-->
        <div class="user">
          <ion-icon class="icone" name="person-circle-outline"></ion-icon>
        </div>
      </div>

      <!--KPis-->
      <div class="cardBox">
        <div class="card">
          <div>
            <div class="numbers">-22,5°C</div>
            <div class="cardName">Crítico frio</div>
          </div>
          <div class="iconbx">
            <ion-icon name="thermometer-outline"></ion-icon>
          </div>
        </div>

        <div class="card">
          <div>
            <div class="numbers">-21,5°C</div>
            <div class="cardName">Alerta frio</div>
          </div>
          <div class="iconbx">
            <ion-icon name="thermometer-outline"></ion-icon>
          </div>
        </div>

        <div class="card">
          <div>
            <div class="numbers">-20°C</div>
            <div class="cardName">Ideal</div>
          </div>
          <div class="iconbx">
            <ion-icon name="thermometer-outline"></ion-icon>
          </div>
        </div>

        <div class="card">
          <div>
            <div class="numbers">-18,5°C</div>
            <div class="cardName">Alerta quente</div>
          </div>
          <div class="iconbx">
            <ion-icon name="thermometer-outline"></ion-icon>
          </div>
        </div>

        <div class="card">
          <div>
            <div class="numbers">-17,5°C</div>
            <div class="cardName">Crítico quente</div>
          </div>
          <div class="iconbx">
            <ion-icon name="thermometer-outline"></ion-icon>
          </div>
        </div>
      </div>

      <div class="details">
        <!-- Tela de detalhes-->
        <div class="ordersTemp">
          <div class="cardHeader">
            <h2>Caminhões Ativos</h2>
            <a href="#" class="btn">Ver tudo</a>
          </div>
          <table>
            <thead>
              <tr>
                <td>Modelo caminhão</td>
                <td>Id</td>
                <td>Temperatura</td>
                <td>Status</td>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>
                  <a onclick="abrir_model()" class="btn-model">Volks - 8150</a>
                </td>
                <td>01</td>
                <td id="temp1"></td>
                <td>
                  <span class="status alerta-quente" id="alerta"></span>
                </td>
              </tr>
              <tr>
                <td>
                  <a onclick="abrir_model()" class="btn-model">Mercedes - 710</a>
                </td>
                <td>02</td>
                <td id="temp2"></td>
                <td>
                  <span class="status alerta-quente" id="alerta2"></span>
                </td>
              </tr>
              <tr>
                <td>
                  <a onclick="abrir_model()" class="btn-model">Volks - 9150</a>
                </td>
                <td>03</td>
                <td id="temp3"></td>
                <td>
                  <span class="status alerta-quente" id="alerta3"></span>
                </td>
              </tr>
              <tr>
                <td>
                  <a onclick="abrir_model()" class="btn-model">Volks - 13180</a>
                </td>
                <td>04</td>
                <td id="temp4"></td>
                <td>
                  <span class="status alerta-quente" id="alerta4"></span>
                </td>
              </tr>
              <tr>
                <td>
                  <a onclick="abrir_model()" class="btn-model">Volvo - FH 460</a>
                </td>
                <td>05</td>
                <td id="temp5"></td>
                <td>
                  <span class="status alerta-quente" id="alerta5"></span>
                </td>
              </tr>
              <tr>
                <td>
                  <a onclick="abrir_model()" class="btn-model">Mercedes - Atego 2425</a>
                </td>
                <td>06</td>
                <td id="temp6"></td>
                <td>
                  <span class="status alerta-quente" id="alerta6"></span>
                </td>
              </tr>
              <tr>
                <td>
                  <a onclick="abrir_model()" class="btn-model">Mercedes - Accelo 815</a>
                </td>
                <td>07</td>
                <td id="temp7"></td>
                <td>
                  <span class="status alerta-quente" id="alerta7"></span>
                </td>
              </tr>
              <tr>
                <td>
                  <a onclick="abrir_model()" class="btn-model">Volvo - 260</a>
                </td>
                <td>08</td>
                <td id="temp8"></td>
                <td>
                  <span class="status alerta-quente" id="alerta8"></span>
                </td>
              </tr>
              <tr>
                <td>
                  <a onclick="abrir_model()" class="btn-model">Scania - R440</a>
                </td>
                <td>09</td>
                <td id="temp9"></td>
                <td>
                  <span class="status alerta-quente" id="alerta9"></span>
                </td>
              </tr>
              <tr>
                <td>
                  <a onclick="abrir_model()" class="btn-model">Volvo - 1298</a>
                </td>
                <td>10</td>
                <td id="temp10"></td>
                <td>
                  <span class="status alerta-quente" id="alerta10"></span>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        <!-- detalhe top 10-->
        <div class="recentTemp">
          <div class="cardHeader">
            <h2>Contagem de Alertas</h2>
          </div>
          <table>
            <tr>
              <td width="60px">
                <div class="imgBx">
                  <ion-icon class="ionCF" name="bus-outline"></ion-icon>
                </div>
              </td>

              <td>
                <h4>
                  <span class="critico-frio">Crítico frio</span>
                </h4>
              </td>
              <td></td>
            </tr>
            <tr>
              <td width="60px">
                <div class="imgBx">
                  <ion-icon class="ionAF" name="bus-outline"></ion-icon>
                </div>
              </td>
              <td>
                <h4>
                  <span class="alerta-frio">Alerta Frio</span>
                </h4>
              </td>
              <td>Caminhão em estado crítico frio, faça algo imediatamente!</td>
            </tr>
            <tr>
              <td width="60px">
                <div class="imgBx">
                  <ion-icon class="ion" name="bus-outline"></ion-icon>
                </div>
              </td>
              <td>
                <h4>
                  <span class="ideal">Ideal</span>
                </h4>
              </td>
              <td>Caminhão em estado de alerta frio, faça algo imediatamente!</td>
            </tr>
            <tr>
              <td width="60px">
                <div class="imgBx">
                  <ion-icon class="ionAQ" name="bus-outline"></ion-icon>
                </div>
              </td>
              <td>
                <h4>
                  <span class="alerta-quente">Alerta Quente</span>
                </h4>
              </td>
              <td>Caminhão em estado de alerta frio, faça algo imediatamente!</td>
            </tr>
            <tr>
              <td width="60px">
                <div class="imgBx">
                  <ion-icon class="ionCQ" name="bus-outline"></ion-icon>
                </div>
              </td>
              <td>
                <h4>
                  <span class="critico-quente">Crítico Quente</span>
                </h4>
              </td>
              <td>Caminhão em estado de alerta frio, faça algo imediatamente!</td>
            </tr>
            <!-- <tr>
              <td width="60px">
                <div class="imgBx">
                  <ion-icon class="ion" name="bus-outline"></ion-icon>
                </div>
              </td>
              <td>
                <h4>
                  Id:05<br /><span class="alerta-quente">Alerta quente</span>
                </h4>
              </td>
              <td>Caminhão em estado de alerta quente, faça algo imediatamente!</td>
            </tr>
            <tr>
              <td width="60px">
                <div class="imgBx">
                  <ion-icon class="ion" name="bus-outline"></ion-icon>
                </div>
              </td>
              <td>
                <h4>
                  Id:02<br /><span class="alerta-quente">Alerta quente</span>
                </h4>
              </td>
              <td>Caminhão em estado de alerta quente, faça algo imediatamente!</td>
            </tr>
            <tr>
              <td width="60px">
                <div class="imgBx">
                  <ion-icon class="ion" name="bus-outline"></ion-icon>
                </div>
              </td>
              <td>
                <h4>
                  Id:09<br /><span class="alerta-quente">Alerta quente</span>
                </h4>
              </td>
              <td>Caminhão em estado de alerta quente, faça algo imediatamente!</td>
            </tr> -->
          </table>
        </div>

        <div class="modal-container">
          <div class="modal">
            <h1 class="title">Caminhão Id: 01 - Volks - 8150</h1>
            <span id="mensagem_usuario"></span>
            <div class="graphBox">
              <div class="box"><canvas id="myChart2"></canvas></div>
            </div>

            <button onclick="fechar_model()" class="btn">Fechar</button>
          </div>
        </div>

        <!-- <div class="cardAlert">
          <div class="card">
            <div>
              <div class="numbers">-24,2°C</div>
              <div class="cardName">idCaminhão: 01</div>
            </div>
            <div class="iconbx">
              <ion-icon name="car-outline"></ion-icon>
            </div>
          </div>

          <div class="card">
            <div>
              <div class="numbers">-22,6°C</div>
              <div class="cardName">idCaminhão: 02</div>
            </div>
            <div class="iconbx">
              <ion-icon name="car-outline"></ion-icon>
            </div>
          </div>

          <div class="card">
            <div>
              <div class="numbers">-21,1°C</div>
              <div class="cardName">idCaminhão: 03</div>
            </div>
            <div class="iconbx">
              <ion-icon name="car-outline"></ion-icon>
            </div>
          </div>

          <div class="card">
            <div>
              <div class="numbers">-18,4°C</div>
              <div class="cardName">idCaminhão: 04</div>
            </div>
            <div class="iconbx">
              <ion-icon name="car-outline"></ion-icon>
            </div>
          </div>
          -->
      </div>
    </div>
  </div>
  <script src=""></script>
  <!-- <script src="public/js/my_chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@3.7.1/dist/chart.min.js"></script> -->
  <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
  <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>

  <script>
    // menuToggle
    let toggle = document.querySelector('.toggle')
    let navigation = document.querySelector('.navigation')
    let main = document.querySelector('.main')

    toggle.onclick = function () {
      navigation.classList.toggle('active')
      main.classList.toggle('active')
    }
    //add class in selected list item
    let list = document.querySelectorAll('.navigation li')
    function activeLink() {
      list.forEach((item) => item.classList.remove('hovered'))
      this.classList.add('hovered')
    }
    list.forEach((item) => item.addEventListener('mouseover', activeLink))
  </script>
</body>
<script>

  let proximaAtualizacao;

  window.onload = obterDadosGrafico(1);

  b_usuario.innerHTML = sessionStorage.NOME_USUARIO;

  function alterarTitulo(idVeiculo) {
    var tituloVeiculo = document.getElementById("tituloVeiculo")
    mensagem_usuario.innerHTML = "Últimas medidas de Temperatura do <span style='color: #e6005a'>Veículo " + idVeiculo + "</span>"
  }

  // O gráfico é construído com três funções:
  // 1. obterDadosGrafico -> Traz dados do Banco de Dados para montar o gráfico da primeira vez
  // 2. plotarGrafico -> Monta o gráfico com os dados trazidos e exibe em tela
  // 3. atualizarGrafico -> Atualiza o gráfico, trazendo novamente dados do Banco

  // Esta função *obterDadosGrafico* busca os últimos dados inseridos em tabela de medidas.
  // para, quando carregar o gráfico da primeira vez, já trazer com vários dados.
  // A função *obterDadosGrafico* também invoca a função *plotarGrafico*

  //     Se quiser alterar a busca, ajuste as regras de negócio em src/controllers
  //     Para ajustar o "select", ajuste o comando sql em src/models
  function obterDadosGrafico(idVeiculo) {
    alterarTitulo(idVeiculo)

    if (proximaAtualizacao != undefined) {
      clearTimeout(proximaAtualizacao);
    }

    fetch(`/medidas/ultimas/${idVeiculo}`, { cache: 'no-store' }).then(function (response) {
      if (response.ok) {
        response.json().then(function (resposta) {
          console.log(`Dados recebidos: ${JSON.stringify(resposta)}`);
          resposta.reverse();

          plotarGrafico(resposta, idVeiculo);
        });
      } else {
        console.error('Nenhum dado encontrado ou erro na API');
      }
    })
      .catch(function (error) {
        console.error(`Erro na obtenção dos dados p/ gráfico: ${error.message}`);
      });
  }

  // Esta função *plotarGrafico* usa os dados capturados na função anterior para criar o gráfico
  // Configura o gráfico (cores, tipo, etc), materializa-o na página e, 
  // A função *plotarGrafico* também invoca a função *atualizarGrafico*
  function plotarGrafico(resposta, idVeiculo) {
    console.log('Iniciando plotagem do gráfico...');

    var dados = {
      labels: [],
      datasets: [
        {
          yAxisID: 'y-temperatura',
          label: 'Temperatura',
          borderColor: '#FFF',
          backgroundColor: '#32b9cd8f',
          fill: true,
          data: []
        }
      ]
    };

    for (i = 0; i < resposta.length; i++) {
      var registro = resposta[i];
      dados.labels.push(registro.momento_grafico);
      dados.datasets[0].data.push(registro.temperatura);
    }

    console.log(JSON.stringify(dados));

    const ctx2 = document.getElementById('myChart2').getContext('2d')
    window.myChart2 = Chart.Line(ctx2, {
      type: 'line',
      data: dados,
      options: {
        responsive: true,
        animation: { duration: 500 },
        hoverMode: 'index',
        stacked: false,
        title: {
          display: false,
          text: 'Dados capturados'
        },
        scales: {
          yAxes: [{
            type: 'linear',
            display: true,
            position: 'left',
            id: 'y-temperatura',
            ticks: {
              beginAtZero: true,
              max: 0,
              min: -30
            }
          },],
        }
      }
    });

    setTimeout(() => atualizarGrafico(idVeiculo, dados), 1000);
  }


  // Esta função *atualizarGrafico* atualiza o gráfico que foi renderizado na página,
  // buscando a última medida inserida em tabela contendo as capturas, 

  //     Se quiser alterar a busca, ajuste as regras de negócio em src/controllers
  //     Para ajustar o "select", ajuste o comando sql em src/models
  function atualizarGrafico(idVeiculo, dados) {
    fetch(`/medidas/tempo-real/${idVeiculo}`, { cache: 'no-store' }).then(function (response) {
      if (response.ok) {
        response.json().then(function (novoRegistro) {

          console.log(`Dados recebidos: ${JSON.stringify(novoRegistro)}`);
          console.log(`Dados atuais do gráfico: ${dados}`);

          // tirando e colocando valores no gráfico
          dados.labels.shift(); // apagar o primeiro
          dados.labels.push(novoRegistro[0].momento_grafico); // incluir um novo momento

          dados.datasets[0].data.shift();  // apagar o primeiro de temperatura
          dados.datasets[0].data.push(novoRegistro[0].temperatura); // incluir uma nova medida de temperatura

          window.myChart2.update();

          // Altere aqui o valor em ms se quiser que o gráfico atualize mais rápido ou mais devagar
          proximaAtualizacao = setTimeout(() => atualizarGrafico(idVeiculo, dados), 1000);

          var nomeAlerta = document.getElementById('teste')
          var caminhao1 = novoRegistro[0].temperatura
          var caminhao2 = caminhao1
          var caminhao3 = (caminhao1 - 0.5)
          var caminhao4 = (caminhao1 - 18)
          var caminhao5 = (caminhao1 - 20)
          var caminhao6 = (caminhao1 + 5)
          var caminhao7 = caminhao1
          var caminhao8 = (caminhao1 - 5)
          var caminhao9 = (caminhao1 - 15)
          var caminhao10 = (caminhao1 - 7)

          temp1.innerHTML = `${caminhao1}`
          temp2.innerHTML = `${caminhao2}`
          temp3.innerHTML = `${caminhao3}`
          temp4.innerHTML = `${caminhao4}`
          temp5.innerHTML = `${caminhao5}`
          temp6.innerHTML = `${caminhao6}`
          temp7.innerHTML = `${caminhao7}`
          temp8.innerHTML = `${caminhao8}`
          temp9.innerHTML = `${caminhao9}`
          temp10.innerHTML = `${caminhao10}`

          if (caminhao1 <= (-22.5)) {
            alerta.style.backgroundColor = '#6600ff'
            alerta.innerHTML = 'Crítico Frio'
          }
          else if (caminhao1 <= (-21.5)) {
            alerta.style.backgroundColor = '#287bff'
            alerta.innerHTML = 'Alerta Frio'
          }
          else if (caminhao1 >= (-17.5)) {
            alerta.style.backgroundColor = '#ff0000'
            alerta.innerHTML = 'Crítico Quente'
          }
          else if (caminhao1 >= (-18.5)) {
            alerta.style.backgroundColor = '#ff9933'
            alerta.innerHTML = 'Alerta Quente'
          }
          else {
            alerta.style.backgroundColor = '#03bb85'
            alerta.innerHTML = 'Ideal'
          }

          if (caminhao2 <= (-22.5)) {
            alerta2.style.backgroundColor = '#6600ff'
            alerta2.innerHTML = 'Crítico Frio'
          }
          else if (caminhao2 <= (-21.5)) {
            alerta2.style.backgroundColor = '#287bff'
            alerta2.innerHTML = 'Alerta Frio'
          }
          else if (caminhao2 >= (-17.5)) {
            alerta2.style.backgroundColor = '#ff0000'
            alerta2.innerHTML = 'Crítico Quente'
          }
          else if (caminhao2 >= (-18.5)) {
            alerta2.style.backgroundColor = '#ff9933'
            alerta2.innerHTML = 'Alerta Quente'
          }
          else {
            alerta2.style.backgroundColor = '#03bb85'
            alerta2.innerHTML = 'Ideal'
          }

          if (caminhao3 <= (-22.5)) {
            alerta3.style.backgroundColor = '#6600ff'
            alerta3.innerHTML = 'Crítico Frio'
          }
          else if (caminhao3 <= (-21.5)) {
            alerta3.style.backgroundColor = '#287bff'
            alerta3.innerHTML = 'Alerta Frio'
          }
          else if (caminhao3 >= (-17.5)) {
            alerta3.style.backgroundColor = '#ff0000'
            alerta3.innerHTML = 'Crítico Quente'
          }
          else if (caminhao3 >= (-18.5)) {
            alerta3.style.backgroundColor = '#ff9933'
            alerta3.innerHTML = 'Alerta Quente'
          }
          else {
            alerta3.style.backgroundColor = '#03bb85'
            alerta3.innerHTML = 'Ideal'
          }

          if (caminhao4 <= (-22.5)) {
            alerta4.style.backgroundColor = '#6600ff'
            alerta4.innerHTML = 'Crítico Frio'
          }
          else if (caminhao4 <= (-21.5)) {
            alerta4.style.backgroundColor = '#287bff'
            alerta4.innerHTML = 'Alerta Frio'
          }
          else if (caminhao4 >= (-17.5)) {
            alerta4.style.backgroundColor = '#ff0000'
            alerta4.innerHTML = 'Crítico Quente'
          }
          else if (caminhao4 >= (-18.5)) {
            alerta4.style.backgroundColor = '#ff9933'
            alerta4.innerHTML = 'Alerta Quente'
          }
          else {
            alerta4.style.backgroundColor = '#03bb85'
            alerta4.innerHTML = 'Ideal'
          }
        
          if (caminhao5 <= (-22.5)) {
            alerta5.style.backgroundColor = '#6600ff'
            alerta5.innerHTML = 'Crítico Frio'
          }
          else if (caminhao5 <= (-21.5)) {
            alerta5.style.backgroundColor = '#287bff'
            alerta5.innerHTML = 'Alerta Frio'
          }
          else if (caminhao5 >= (-17.5)) {
            alerta5.style.backgroundColor = '#ff0000'
            alerta5.innerHTML = 'Crítico Quente'
          }
          else if (caminhao5 >= (-18.5)) {
            alerta5.style.backgroundColor = '#ff9933'
            alerta5.innerHTML = 'Alerta Quente'
          }
          else {
            alerta5.style.backgroundColor = '#03bb85'
            alerta5.innerHTML = 'Ideal'
          }
        
          if (caminhao6 <= (-22.5)) {
            alerta6.style.backgroundColor = '#6600ff'
            alerta6.innerHTML = 'Crítico Frio'
          }
          else if (caminhao6 <= (-21.5)) {
            alerta6.style.backgroundColor = '#287bff'
            alerta6.innerHTML = 'Alerta Frio'
          }
          else if (caminhao6 >= (-17.5)) {
            alerta6.style.backgroundColor = '#ff0000'
            alerta6.innerHTML = 'Crítico Quente'
          }
          else if (caminhao6 >= (-18.5)) {
            alerta6.style.backgroundColor = '#ff9933'
            alerta6.innerHTML = 'Alerta Quente'
          }
          else {
            alerta6.style.backgroundColor = '#03bb85'
            alerta6.innerHTML = 'Ideal'
          }
        
          if (caminhao7 <= (-22.5)) {
            alerta7.style.backgroundColor = '#6600ff'
            alerta7.innerHTML = 'Crítico Frio'
          }
          else if (caminhao7 <= (-21.5)) {
            alerta7.style.backgroundColor = '#287bff'
            alerta7.innerHTML = 'Alerta Frio'
          }
          else if (caminhao7 >= (-17.5)) {
            alerta7.style.backgroundColor = '#ff0000'
            alerta7.innerHTML = 'Crítico Quente'
          }
          else if (caminhao7 >= (-18.5)) {
            alerta7.style.backgroundColor = '#ff9933'
            alerta7.innerHTML = 'Alerta Quente'
          }
          else {
            alerta7.style.backgroundColor = '#03bb85'
            alerta7.innerHTML = 'Ideal'
          }
        
          if (caminhao8 <= (-22.5)) {
            alerta8.style.backgroundColor = '#6600ff'
            alerta8.innerHTML = 'Crítico Frio'
          }
          else if (caminhao8 <= (-21.5)) {
            alerta8.style.backgroundColor = '#287bff'
            alerta8.innerHTML = 'Alerta Frio'
          }
          else if (caminhao8 >= (-17.5)) {
            alerta8.style.backgroundColor = '#ff0000'
            alerta8.innerHTML = 'Crítico Quente'
          }
          else if (caminhao8 >= (-18.5)) {
            alerta8.style.backgroundColor = '#ff9933'
            alerta8.innerHTML = 'Alerta Quente'
          }
          else {
            alerta8.style.backgroundColor = '#03bb85'
            alerta8.innerHTML = 'Ideal'
          }
        
          if (caminhao9 <= (-22.5)) {
            alerta9.style.backgroundColor = '#6600ff'
            alerta9.innerHTML = 'Crítico Frio'
          }
          else if (caminhao9 <= (-21.5)) {
            alerta9.style.backgroundColor = '#287bff'
            alerta9.innerHTML = 'Alerta Frio'
          }
          else if (caminhao9 >= (-17.5)) {
            alerta9.style.backgroundColor = '#ff0000'
            alerta9.innerHTML = 'Crítico Quente'
          }
          else if (caminhao9 >= (-18.5)) {
            alerta9.style.backgroundColor = '#ff9933'
            alerta9.innerHTML = 'Alerta Quente'
          }
          else {
            alerta9.style.backgroundColor = '#03bb85'
            alerta9.innerHTML = 'Ideal'
          }
        
          if (caminhao10 <= (-22.5)) {
            alerta10.style.backgroundColor = '#6600ff'
            alerta10.innerHTML = 'Crítico Frio'
          }
          else if (caminhao10 <= (-21.5)) {
            alerta10.style.backgroundColor = '#287bff'
            alerta10.innerHTML = 'Alerta Frio'
          }
          else if (caminhao10 >= (-17.5)) {
            alerta10.style.backgroundColor = '#ff0000'
            alerta10.innerHTML = 'Crítico Quente'
          }
          else if (caminhao10 >= (-18.5)) {
            alerta10.style.backgroundColor = '#ff9933'
            alerta10.innerHTML = 'Alerta Quente'
          }
          else {
            alerta10.style.backgroundColor = '#03bb85'
            alerta10.innerHTML = 'Ideal'
          }
        });

      } else {
        console.error('Nenhum dado encontrado ou erro na API');
        // Altere aqui o valor em ms se quiser que o gráfico atualize mais rápido ou mais devagar
        proximaAtualizacao = setTimeout(() => atualizarGrafico(idVeiculo, dados), 1000);
      }
    })
      .catch(function (error) {
        console.error(`Erro na obtenção dos dados p/ gráfico: ${error.message}`);
      });
  }

</script>

<script>
  const modal = document.querySelector('.modal-container')
  function abrir_model() {
    obterDadosGrafico(1)
    modal.classList.add('abre')
  }

  function fechar_model() {
    modal.classList.remove('abre')
  }
</script>

</html>